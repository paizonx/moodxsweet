<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="robots" content="noindex, nofollow">

<meta property="og:title" content="VidStream Premium">
<meta property="og:description" content="Streaming video viral terbaru.">
<meta property="og:image" content="https://cdn.videy.co/DEFAULT_THUMB.jpg"> 
<meta property="og:type" content="website">

<title>YouTube Premium</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

<style>
/* --- YOUTUBE DARK THEME CSS --- */
:root {
  --bg-main: #0f0f0f;
  --bg-secondary: #272727;
  --text-main: #f1f1f1;
  --text-gray: #aaaaaa;
  --accent: #ff0000; /* YouTube Red */
  --border: #3f3f3f;
  --sidebar-w: 240px;
  --header-h: 56px;
}

* { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
body { margin: 0; background-color: var(--bg-main); color: var(--text-main); font-family: 'Roboto', sans-serif; overflow-x: hidden; }
a { text-decoration: none; color: inherit; }
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-thumb { background: #717171; border-radius: 4px; }
::-webkit-scrollbar-track { background: transparent; }

/* HEADER */
.header { position: fixed; top: 0; left: 0; right: 0; height: var(--header-h); background: var(--bg-main); display: flex; align-items: center; justify-content: space-between; padding: 0 16px; z-index: 100; border-bottom: 1px solid #2b2b2b; }
.start { display: flex; align-items: center; gap: 16px; }
.menu-icon { fill: white; cursor: pointer; padding: 8px; border-radius: 50%; }
.menu-icon:hover { background: var(--bg-secondary); }
.logo { display: flex; align-items: center; gap: 4px; font-weight: 700; font-size: 18px; letter-spacing: -0.5px; }
.logo svg { height: 20px; }
.search-bar { display: flex; align-items: center; background: #121212; border: 1px solid #303030; border-radius: 40px; overflow: hidden; width: 40%; max-width: 600px; }
.search-bar input { background: transparent; border: none; color: white; padding: 10px 16px; width: 100%; font-size: 16px; }
.search-bar button { background: #222; border: none; border-left: 1px solid #303030; padding: 10px 20px; cursor: pointer; }
.search-bar button svg { fill: #fff; width: 20px; }
.end-icons { display: flex; align-items: center; gap: 15px; }
.avatar { width: 32px; height: 32px; background: purple; border-radius: 50%; text-align: center; line-height: 32px; font-size: 14px; cursor: pointer; }

/* LAYOUT */
.main-container { display: flex; margin-top: var(--header-h); min-height: calc(100vh - var(--header-h)); }
.sidebar { width: var(--sidebar-w); position: fixed; bottom: 0; top: var(--header-h); left: 0; background: var(--bg-main); overflow-y: auto; padding: 12px; transition: transform 0.2s; z-index: 90; }
.sidebar-link { display: flex; align-items: center; gap: 20px; padding: 10px 12px; border-radius: 10px; cursor: pointer; color: white; font-size: 14px; margin-bottom: 4px; }
.sidebar-link:hover, .sidebar-link.active { background: var(--bg-secondary); }
.sidebar-link svg { width: 24px; height: 24px; fill: currentColor; }

.content { margin-left: var(--sidebar-w); flex: 1; padding: 24px; transition: margin 0.2s; }

/* GALLERY GRID */
.grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; row-gap: 30px; }
.video-card { cursor: pointer; display: flex; flex-direction: column; gap: 10px; }
.thumbnail { width: 100%; aspect-ratio: 16/9; background: #000; border-radius: 12px; overflow: hidden; position: relative; }
.thumb-img { width: 100%; height: 100%; object-fit: cover; }
.duration { position: absolute; bottom: 8px; right: 8px; background: rgba(0,0,0,0.8); color: white; padding: 2px 4px; font-size: 12px; border-radius: 4px; font-weight: 500; }
.details { display: flex; gap: 12px; }
.channel-icon { width: 36px; height: 36px; border-radius: 50%; background: #333; flex-shrink: 0; }
.meta { display: flex; flex-direction: column; }
.title { font-size: 16px; font-weight: 600; line-height: 1.4; color: white; margin-bottom: 4px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.channel-name { font-size: 14px; color: var(--text-gray); }
.views { font-size: 14px; color: var(--text-gray); }

/* PLAYER PAGE */
#playerPage { display: none; }
.player-layout { display: flex; gap: 24px; max-width: 1300px; margin: 0 auto; }
.primary-col { flex: 1; min-width: 0; }
.secondary-col { width: 350px; flex-shrink: 0; }

.player-shell { width: 100%; aspect-ratio: 16/9; background: black; position: relative; border-radius: 0px; overflow: hidden; }
/* Support Vertical Video Styling */
.player-shell.vertical { aspect-ratio: 9/16; max-width: 450px; margin: 0 auto; border-radius: 12px; }

video, iframe { width: 100%; height: 100%; object-fit: contain; }
.video-info { padding: 12px 0; border-bottom: 1px solid var(--border); margin-bottom: 12px; }
.vid-main-title { font-size: 20px; font-weight: 700; margin-bottom: 10px; }
.actions-bar { display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 10px; }
.channel-info { display: flex; align-items: center; gap: 12px; }
.ch-avatar { width: 40px; height: 40px; background: #555; border-radius: 50%; }
.sub-btn { background: var(--text-main); color: black; padding: 8px 16px; border-radius: 18px; font-weight: 600; font-size: 14px; cursor: pointer; border: none; }
.action-buttons { display: flex; gap: 8px; }
.act-btn { background: var(--bg-secondary); color: white; border: none; padding: 8px 16px; border-radius: 18px; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 6px; font-size: 14px; }
.act-btn:hover { background: #3f3f3f; }

/* RECOMENDATION LIST */
.rec-card { display: flex; gap: 8px; margin-bottom: 8px; cursor: pointer; }
.rec-thumb { width: 168px; height: 94px; background: #000; border-radius: 8px; overflow: hidden; position: relative; flex-shrink: 0; }
.rec-info { display: flex; flex-direction: column; gap: 4px; }
.rec-title { font-size: 14px; font-weight: 600; line-height: 1.2; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.rec-ch { font-size: 12px; color: var(--text-gray); }

/* ADS & UTILS */
.ad-native { width: 100%; min-height: 100px; background: #151515; border-radius: 12px; display: flex; justify-content: center; align-items: center; margin: 15px 0; overflow: hidden; border: 1px solid #333; }
#statusMsg { text-align: center; color: var(--text-gray); margin-top: 50px; }

/* RESPONSIVE */
@media (max-width: 1000px) {
  .player-layout { flex-direction: column; }
  .secondary-col { width: 100%; }
}
@media (max-width: 768px) {
  .sidebar { transform: translateX(-100%); width: 240px; }
  .sidebar.open { transform: translateX(0); }
  .content { margin-left: 0; }
  .search-bar { display: none; } /* Simpifikasi mobile */
  .player-shell.vertical { width: 100%; border-radius: 0; }
}
</style>
</head>
<body oncontextmenu="return false;">

<div class="header">
  <div class="start">
    <div class="menu-icon" onclick="toggleSidebar()">
      <svg viewBox="0 0 24 24" height="24" width="24"><path d="M21 6H3V5h18v1zm0 5H3v1h18v-1zm0 6H3v1h18v-1z" fill="white"></path></svg>
    </div>
    <div class="logo" onclick="window.location.href=window.location.pathname" style="cursor:pointer">
      <svg viewBox="0 0 24 24" fill="red"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" fill="white"></path></svg>
      YouTube <span style="font-weight:300; font-size:10px; margin-top:-10px; margin-left:2px;">ID</span>
    </div>
  </div>
  
  <div class="search-bar">
    <input type="text" placeholder="Search" readonly>
    <button>
      <svg viewBox="0 0 24 24"><path d="M20.87,20.17l-5.59-5.59C16.35,13.35,17,11.75,17,10c0-3.87-3.13-7-7-7s-7,3.13-7,7s3.13,7,7,7c1.75,0,3.35-0.65,4.58-1.71 l5.59,5.59L20.87,20.17z M10,16c-3.31,0-6-2.69-6-6s2.69-6,6-6s6,2.69,6,6S13.31,16,10,16z" fill="white"></path></svg>
    </button>
  </div>

  <div class="end-icons">
    <div class="avatar">U</div>
  </div>
</div>

<div class="main-container">
  
  <div class="sidebar" id="sidebar">
    <div class="sidebar-link active" onclick="window.location.href=window.location.pathname">
      <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8"></path></svg> Home
    </div>
    <div class="sidebar-link">
      <svg viewBox="0 0 24 24"><path d="M17.05 19.5L21 23l-1.41 1.41-3.55-3.54c-.6.38-1.31.59-2.04.59-2.21 0-4-1.79-4-4 0-2.21 1.79-4 4-4s4 1.79 4 4c0 .73-.21 1.44-.59 2.04zM10.5 4C6.36 4 3 7.36 3 11.5S6.36 19 10.5 19 18 15.64 18 11.5 14.64 4 10.5 4z"></path></svg> Shorts
    </div>
    <div class="sidebar-link">
      <svg viewBox="0 0 24 24"><path d="M18.7 8.7H5.3V7h13.4v1.7zm-1.7-5.3H7v1.8h10V3.4zm3.3 8.9H3.7V22h16.6V12.3z"></path></svg> Subscription
    </div>
    <hr style="border-color:#3f3f3f; margin:10px 0;">
    <div class="sidebar-link">
      <svg viewBox="0 0 24 24"><path d="M11 7l6 3.5-6 3.5V7zm7 13H4v6h8.5c-.3-.6-.5-1.2-.5-1.9 0-2.5 2-4.5 4.5-4.5.7 0 1.3.2 1.9.5V20zM19.5 21c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5z"></path></svg> Library
    </div>
  </div>

  <div class="content">
    
    <div id="galleryPage">
       <div id="statusMsg">Loading videos...</div>
       <div class="grid-container" id="gridTarget"></div>
    </div>

    <div id="playerPage">
      <div class="player-layout">
        
        <div class="primary-col">
          <div id="shell" class="player-shell">
            <video id="vid" controls playsinline></video>
            <iframe id="frame" allow="autoplay; fullscreen" allowfullscreen></iframe>
          </div>
          
          <div class="video-info">
            <h1 class="vid-main-title" id="vidTitle">Loading Title...</h1>
            
            <div class="ad-native">
               <div id="container-8754c34f20e587c8ef08a064d9f71e59"></div>
            </div>

            <div class="actions-bar">
              <div class="channel-info">
                <div class="ch-avatar"></div>
                <div>
                  <div style="font-weight:700;">Viral Channel</div>
                  <div style="font-size:12px; color:var(--text-gray);">1.2M subscribers</div>
                </div>
                <button class="sub-btn" id="subBtn">Subscribe</button>
              </div>
              
              <div class="action-buttons">
                <button class="act-btn"><svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z"/></svg> 12K</button>
                <button class="act-btn"><svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"/></svg></button>
                <button class="act-btn" id="dlBtn">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"/></svg>
                  Download
                </button>
              </div>
            </div>
            
            <div style="background:#272727; padding:12px; border-radius:12px; font-size:14px; margin-top:12px; cursor:pointer;">
              <span style="font-weight:600;">245K views • 2 hours ago</span><br>
              <span style="color:#ccc;">Full video description here. Watch more trending videos on our channel.</span>
            </div>
          </div>
        </div>

        <div class="secondary-col">
          <div id="recTarget"></div>
        </div>

      </div>
    </div>

  </div>
</div>

<div id="histats_counter" style="display:none;"></div>

<script>
/* --- CONFIGURATION --- */
const SMARTLINK = "https://ridernoodleacerbity.com/pu4v8n14t?key=280fea026bf240b90dd4b3343468c40f"; // Direct Link
const HISTATS_ID = "4879497";

const q = new URLSearchParams(location.search);
const vidId = q.get('id');

/* --- SECURITY (Anti-Clone/Anti-Copy) --- */
document.addEventListener('keydown', function(e) {
  if (e.ctrlKey && (e.key === 'u' || e.key === 'U')) e.preventDefault();
  if (e.key === 'F12') e.preventDefault();
  if (e.ctrlKey && e.shiftKey && e.key === 'I') e.preventDefault();
});
document.addEventListener('contextmenu', event => event.preventDefault());

/* --- LOGIC UTILS --- */
function toggleSidebar() {
  document.getElementById('sidebar').classList.toggle('open');
}

/* --- DATA LOADER --- */
async function loadContent() {
  const statusMsg = document.getElementById('statusMsg');
  const galleryPage = document.getElementById('galleryPage');
  const playerPage = document.getElementById('playerPage');
  
  if(vidId) {
    galleryPage.style.display = 'none';
    playerPage.style.display = 'block';
    setupPlayer();
    injectAds(); // Hanya inject iklan jika di halaman player
  } else {
    galleryPage.style.display = 'block';
    playerPage.style.display = 'none';
  }

  try {
    const res = await fetch('videos.txt?t=' + Date.now());
    if(!res.ok) throw new Error("videos.txt not found");
    const text = await res.text();
    const lines = text.split('\n').filter(line => line.trim().length > 3 && !line.startsWith('['));
    
    // Parsing Data
    const videos = lines.map(line => {
       const parts = line.split('|');
       return {
         id: parts[0].trim(),
         title: parts[1] ? parts[1].trim() : 'Viral Video',
         thumb: getThumb(parts[0].trim())
       };
    });

    if(vidId) {
      // Load Recommendations (Side Bar)
      renderRecs(videos);
      
      // Set Title
      const currentVid = videos.find(v => v.id === vidId);
      if(currentVid) document.getElementById('vidTitle').textContent = currentVid.title;
    } else {
      // Load Gallery (Main Page)
      renderGallery(videos);
      statusMsg.style.display = 'none';
    }

  } catch (err) {
    console.log(err);
    if(!vidId) statusMsg.textContent = "Failed to load videos.";
  }
}

function getThumb(id) {
  if(id.length > 9 || id.startsWith('k')) {
    // Dailymotion
    return `https://www.dailymotion.com/thumbnail/video/${id}`;
  } else {
    // Videy / Twing (Default thumb)
    return `https://cdn.videy.co/${id}.jpg`; 
  }
}

function renderGallery(videos) {
  const target = document.getElementById('gridTarget');
  let html = '';
  videos.forEach(v => {
    // Jika thumb error/tidak ada, pakai placeholder
    let thumbUrl = v.thumb; 
    
    html += `
      <div class="video-card" onclick="location.href='?id=${v.id}'">
        <div class="thumbnail">
          <img src="${thumbUrl}" class="thumb-img" onerror="this.src='https://via.placeholder.com/320x180?text=No+Thumb'">
          <div class="duration">10:05</div>
        </div>
        <div class="details">
          <div class="channel-icon"></div>
          <div class="meta">
            <div class="title">${v.title}</div>
            <div class="channel-name">Viral Channel</div>
            <div class="views">250K views • 1 day ago</div>
          </div>
        </div>
      </div>
    `;
  });
  target.innerHTML = html;
}

function renderRecs(videos) {
  const target = document.getElementById('recTarget');
  let html = '<h3 style="margin-top:0;">Up Next</h3>';
  // Shuffle array biar rekomendasi acak
  const shuffled = videos.sort(() => 0.5 - Math.random()).slice(0, 15); 
  
  shuffled.forEach(v => {
    if(v.id === vidId) return; // Skip video yg sedang diputar
    html += `
      <div class="rec-card" onclick="location.href='?id=${v.id}'">
        <div class="rec-thumb">
          <img src="${v.thumb}" style="width:100%; height:100%; object-fit:cover;" onerror="this.src='https://via.placeholder.com/168x94?text=Video'">
        </div>
        <div class="rec-info">
          <div class="rec-title">${v.title}</div>
          <div class="rec-ch">Viral Channel</div>
          <div style="font-size:11px; color:#aaa;">New</div>
        </div>
      </div>
    `;
  });
  target.innerHTML = html;
}

/* --- PLAYER LOGIC --- */
function setupPlayer() {
  const vid = document.getElementById('vid');
  const frame = document.getElementById('frame');
  const shell = document.getElementById('shell');

  // Assign Direct Link ke tombol
  document.getElementById('dlBtn').onclick = () => window.open(SMARTLINK, '_blank');
  document.getElementById('subBtn').onclick = () => window.open(SMARTLINK, '_blank');

  if(vidId.length > 9 || vidId.startsWith('k')) {
    // DAILYMOTION
    checkDmRatio(vidId);
    vid.style.display = 'none';
    frame.src = `https://www.dailymotion.com/embed/video/${vidId}?autoplay=1&mute=0&ui-highlight=ff0000`;
  } else {
    // VIDEY / TWING / MP4
    // Coba load dari CDN Videy dulu
    const url = `https://cdn.videy.co/${vidId}.mp4`;
    frame.style.display = 'none';
    vid.src = url;
    vid.load();
    vid.play().catch(e => console.log("Autoplay need user interaction"));
    
    // Auto detect vertical/horizontal
    vid.onloadedmetadata = function() {
      if(this.videoHeight > this.videoWidth) {
        shell.classList.add('vertical');
      } else {
        shell.classList.remove('vertical');
      }
    };
    // Error handling jika bukan Videy (misal Twing)
    vid.onerror = function() {
      console.log("Videy fail, trying Twing fallback...");
      // Sesuaikan domain TWING jika beda. Asumsi format mp4 sama.
      // vid.src = `https://cdn.video.twing.cc/${vidId}.mp4`; 
    };
  }
}

async function checkDmRatio(id) {
  try {
    const res = await fetch(`https://www.dailymotion.com/services/oembed?url=https://www.dailymotion.com/video/${id}`);
    const data = await res.json();
    if(data.height > data.width) {
       document.getElementById('shell').classList.add('vertical');
    }
  } catch(e) {}
}

/* --- ADS INJECTION (ONLY ON PLAYER) --- */
function injectAds() {
  // 1. Popunder
  const pop = document.createElement('script');
  pop.src = "https://ridernoodleacerbity.com/c9/c0/46/c9c04611f8fb3b0b21da4b49fb98d3fa.js";
  pop.type = "text/javascript";
  document.body.appendChild(pop);

  // 2. Native Banner (Script Header)
  const natHead = document.createElement('script');
  natHead.async = true;
  natHead.setAttribute('data-cfasync', 'false');
  natHead.src = "https://ridernoodleacerbity.com/8754c34f20e587c8ef08a064d9f71e59/invoke.js";
  document.head.appendChild(natHead);

  // 3. Histats
  const hs = document.createElement('script');
  hs.text = `
    var _Hasync= _Hasync|| [];
    _Hasync.push(['Histats.start', '1,${HISTATS_ID},4,0,0,0,00010000']);
    _Hasync.push(['Histats.fasi', '1']);
    _Hasync.push(['Histats.track_hits', '']);
    (function() {
    var hs = document.createElement('script'); hs.type = 'text/javascript'; hs.async = true;
    hs.src = ('//s10.histats.com/js15_as.js');
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(hs);
    })();
  `;
  document.body.appendChild(hs);
}

// Start
loadContent();

</script>
</body>
</html>
